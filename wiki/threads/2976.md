# A script I need for my map to be complete
Modme | General

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">jfuvv</span></span>:</strong>

<p>Just a quick question does anyone know the script for when if you fell off a challenge map it will spawn you back on the map it would amazing if someone could help me thank you</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">KillJoy</span></span>:</strong>

<p>in your mapname.gsc directly under:<br /><br />[CODE=cpp]function main()<br /><br />{<br /><br />    zm_usermap::main();[/CODE]<br /><br />add this<br /><br />[CODE=cpp]thread player_teleporter_init();[/CODE]<br /><br /><br />at very bottom of gsc<br /><br />add this<br /><br />[CODE=cpp]<br />function player_teleporter_init()<br />{<br />    player_tp = GetEntArray( &quot;teleport_player&quot;, &quot;targetname&quot; );<br />    for( i = 0; i &lt; player_tp.size; i++ )<br />    {<br />        player_tp<em>thread player_teleport();<br />    }<br />}<br /><br />function player_teleport()<br />{<br />    destination = GetEnt( self.target, &quot;targetname&quot; );<br />    while(1)<br />    {<br />        self waittill( &quot;trigger&quot;, player );<br />        player SetOrigin( destination.origin );<br />        player SetPlayerAngles( destination.angles );<br />    }<br />}[/CODE]<br /><br /><br /><br />in Radiant:<br /><br />add a trig_multi with the targetname &quot;teleport_player&quot;<br /><br />add a script_origin<br />make sure you select server side kvp<br /><br />deselect all<br /><br />select the trig, then select the origin, then press w (this will auto link them for script)<br /><br />expand the trig_multi to the area that is off the map<br />once the player touches the trigger, he will be teleported back to the origin<br /><br />save compile link your map<br /><br /><br />that should be it, this is from my 2018 monopoly map so lmk if i missed anything</em></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">jfuvv</span></span>:</strong>

<p><blockquote>in your mapname.gsc directly under:<br /><br />[CODE=cpp]function main()<br /><br />{<br /><br />    zm_usermap::main();[/CODE]<br /><br />add this<br /><br />[CODE=cpp]thread player_teleporter_init();[/CODE]<br /><br /><br />at very bottom of gsc<br /><br />add this<br /><br />[CODE=cpp]<br />function player_teleporter_init()<br />{<br />    player_tp = GetEntArray( &quot;teleport_player&quot;, &quot;targetname&quot; );<br />    for( i = 0; i &lt; player_tp.size; i++ )<br />    {<br />        player_tp<em>thread player_teleport();<br />    }<br />}<br /><br />function player_teleport()<br />{<br />    destination = GetEnt( self.target, &quot;targetname&quot; );<br />    while(1)<br />    {<br />        self waittill( &quot;trigger&quot;, player );<br />        player SetOrigin( destination.origin );<br />        player SetPlayerAngles( destination.angles );<br />    }<br />}[/CODE]<br /><br /><br /><br />in Radiant:<br /><br />add a trig_multi with the targetname &quot;teleport_player&quot;<br /><br />add a script_struct<br /><br />deselect all<br /><br />select the trig then select the struct then press w (this will auto link them for script)<br /><br />expand the trig_multi to the area that is off the map<br />once the player touches the trigger, he will be teleported back to the struct<br /><br />save compile link your map<br /><br /><br />that should be it, this is from my 2018 monopoly map so lmk if i missed anything<br />[/QUOTE]<br />Your a legend pal thank you for the help thank you</em></blockquote></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">jfuvv</span></span>:</strong>

<p><blockquote>in your mapname.gsc directly under:<br /><br />[CODE=cpp]function main()<br /><br />{<br /><br />    zm_usermap::main();[/CODE]<br /><br />add this<br /><br />[CODE=cpp]thread player_teleporter_init();[/CODE]<br /><br /><br />at very bottom of gsc<br /><br />add this<br /><br />[CODE=cpp]<br />function player_teleporter_init()<br />{<br />    player_tp = GetEntArray( &quot;teleport_player&quot;, &quot;targetname&quot; );<br />    for( i = 0; i &lt; player_tp.size; i++ )<br />    {<br />        player_tp<em>thread player_teleport();<br />    }<br />}<br /><br />function player_teleport()<br />{<br />    destination = GetEnt( self.target, &quot;targetname&quot; );<br />    while(1)<br />    {<br />        self waittill( &quot;trigger&quot;, player );<br />        player SetOrigin( destination.origin );<br />        player SetPlayerAngles( destination.angles );<br />    }<br />}[/CODE]<br /><br /><br /><br />in Radiant:<br /><br />add a trig_multi with the targetname &quot;teleport_player&quot;<br /><br />add a script_struct<br /><br />deselect all<br /><br />select the trig then select the struct then press w (this will auto link them for script)<br /><br />expand the trig_multi to the area that is off the map<br />once the player touches the trigger, he will be teleported back to the struct<br /><br />save compile link your map<br /><br /><br />that should be it, this is from my 2018 monopoly map so lmk if i missed anything<br />[/QUOTE]<br />Alright killjoy thank you for the script I followed every step and when I go into the trigger nothing happens have you got any idea why this could be happing ?</em></blockquote></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Pepergogo</span></span>:</strong>

<p>Hi [USER=291]@KillJoy[/USER] <br /><br />I try the script but doesn&#39;t happen anything :(<br />When I touch the trigger it&#39;s like it wasn&#39;t there at all, any idea what I can do to solve it?<br /><br /><img style="max-width: 500px;" src="{{ '/wiki/threads/assets/a.569.jpg' | relative_url }}"><br /><br /><img style="max-width: 500px;" src="{{ '/wiki/threads/assets/a.570.jpg' | relative_url }}"><br /><br />
[CODE=php]#using scripts\codescripts\struct;<br /><br />#using scripts\shared\array_shared;<br />#using scripts\shared\callbacks_shared;<br />#using scripts\shared\clientfield_shared;<br />#using scripts\shared\compass;<br />#using scripts\shared\exploder_shared;<br />#using scripts\shared\flag_shared;<br />#using scripts\shared\laststand_shared;<br />#using scripts\shared\math_shared;<br />#using scripts\shared\scene_shared;<br />#using scripts\shared\util_shared;<br /><br />#insert scripts\shared\shared.gsh;<br />#insert scripts\shared\version.gsh;<br /><br />#insert scripts\zm\_zm_utility.gsh;<br /><br />#using scripts\zm\_load;<br />#using scripts\zm\_zm;<br />#using scripts\zm\_zm_audio;<br />#using scripts\zm\_zm_powerups;<br />#using scripts\zm\_zm_utility;<br />#using scripts\zm\_zm_weapons;<br />#using scripts\zm\_zm_zonemgr;<br /><br />#using scripts\shared\ai\zombie_utility;<br /><br />//Perks<br />#using scripts\zm\_zm_pack_a_punch;<br />#using scripts\zm\_zm_pack_a_punch_util;<br />#using scripts\zm\_zm_perk_additionalprimaryweapon;<br />#using scripts\zm\_zm_perk_doubletap2;<br />#using scripts\zm\_zm_perk_deadshot;<br />#using scripts\zm\_zm_perk_juggernaut;<br />#using scripts\zm\_zm_perk_quick_revive;<br />#using scripts\zm\_zm_perk_sleight_of_hand;<br />#using scripts\zm\_zm_perk_staminup;<br /><br />//Powerups<br />#using scripts\zm\_zm_powerup_double_points;<br />#using scripts\zm\_zm_powerup_carpenter;<br />#using scripts\zm\_zm_powerup_fire_sale;<br />#using scripts\zm\_zm_powerup_free_perk;<br />#using scripts\zm\_zm_powerup_full_ammo;<br />#using scripts\zm\_zm_powerup_insta_kill;<br />#using scripts\zm\_zm_powerup_nuke;<br />//#using scripts\zm\_zm_powerup_weapon_minigun;<br /><br />//Traps<br />#using scripts\zm\_zm_trap_electric;<br /><br />#using scripts\zm\zm_usermap;<br /><br />    // NSZ Brutus<br />    #using scripts\_NSZ\nsz_brutus;<br /><br />//*****************************************************************************<br />// MAIN<br />//*****************************************************************************<br /><br />function main()<br />{<br />    // NSZ Brutus<br />    brutus::init();<br /><br />    zm_usermap::main();<br /><br />    //Teleport player<br />    thread player_teleporter_init();<br />    <br />    level._zombie_custom_add_weapons =&amp;custom_add_weapons;<br />    <br />    //Setup the levels Zombie Zone Volumes<br />    level.zones = [];<br />    level.zone_manager_init_func =&amp;usermap_test_zone_init;<br />    init_zones[0] = &quot;start_zone&quot;;<br />    level thread zm_zonemgr::manage_zones( init_zones );<br /><br />    level.pathdist_type = PATHDIST_ORIGINAL;<br /><br />    //Brutus Boss fight<br />    thread brutus_doo_dah();<br />}<br /><br />function usermap_test_zone_init()<br />{<br />    level flag::init( &quot;always_on&quot; );<br />    level flag::set( &quot;always_on&quot; );<br />}   <br /><br />function custom_add_weapons()<br />{<br />    zm_weapons::load_weapon_spec_from_table(&quot;gamedata/weapons/zm/zm_levelcommon_weapons.csv&quot;, 1);<br />}<br /><br />//Brutus Boss Fight<br />function brutus_doo_dah()<br />{<br />    level.brutuses = 14; //amount of brutuses to spawn<br />    level.brutus_in_between_spawn_time = 30; //time between spawns for Brutus. If you&#39;re only spawning one Brutus, set this to 0.<br />    level.stop_zombies_from_spawning = false; //set &quot;true&quot; to stop zombies from spawning during Brutus fight.<br />    level.kill_all_zombies_before_fight = true; //set &quot;true&quot; to kill all zombies before Brutus fight.<br /><br />    level.brutus_reward = &quot;door&quot;; //what happens when you kill all the Brutuses. Right now, options are: (&quot;door&quot;,&quot;powerup&quot;,&quot;gun&quot;)<br />    level.brutus_reward_2 = false; //add another reward if you want. just say &quot;false&quot; or delete the line if you don&#39;t want an extra reward.<br />    level.brutus_reward_3 = false; //add yet another reward if you want. Note that you cannot do more than one of the same reward.<br />    level.brutus_powerup_type = &quot;nuke&quot;; //if using a powerup as one of your rewards, this is what type. can be (&quot;full_ammo&quot;,&quot;nuke&quot;,&quot;insta_kill&quot;,&quot;free_perk&quot;,&quot;fire_sale&quot;,&quot;double_points&quot;,&quot;carpenter&quot;,&quot;minigun&quot;,and &quot;random&quot;)<br />    level.brutus_reward_weapons = array( &quot;ar_damage&quot;, &quot;lmg_cqb&quot;, &quot;shotgun_pump&quot;, &quot;smg_versatile&quot; ); //weapons it can give you in the &quot;gun&quot; reward. put as many or as little as you like.<br />    level.brutus_gun_expire = true; //whether or not the gun will go away in time.<br />    level.brutus_delete_door_after_move = true; //set &quot;true&quot; to delete the door after its done moving. Would recommend if it won&#39;t be seen.<br />    level.brutus_gun_hintstring = &quot;Press ^3[{+activate}]^7 to take weapon&quot;; //if gun reward is activated, hintstring for picking up gun.<br />    level.brutus_one_gun_per_player = true; //for gun powerup, set &quot;true&quot; if you want a gun to spawn for each player, &quot;false&quot; for just one gun no matter what.<br />    level.brutus_different_guns_per_player = false; //for gun powerup, set &quot;true&quot; if you want each gun to be randomly different, false if you want them to be the same random gun. if one_gun_per_player = &quot;false&quot; this doesn&#39;t matter.<br />    <br />    <br />    trig = GetEnt(&quot;brutus_trig&quot;,&quot;targetname&quot;);<br />    trig waittill(&quot;trigger&quot;,player);<br />    if(level.stop_zombies_from_spawning == true)<br />        level flag::clear( &quot;spawn_zombies&quot; );<br />    if(level.kill_all_zombies_before_fight == true)<br />    {<br />        zombies = zombie_utility::get_round_enemy_array();<br />        if ( isdefined( zombies ) )<br />        {<br />            array::run_all( zombies, &amp;Kill );<br />        }<br />    }<br />    <br />    <br />    thread spawn_my_brutus();   <br />    <br />    <br />    <br />    level waittill(&quot;all_brutuses_down&quot;);<br />    //IPrintLnBold(&quot;recieved&quot;);<br />    if(level.stop_zombies_from_spawning == true)<br />        level flag::set( &quot;spawn_zombies&quot; );<br />    brutus_reward();<br />}<br />function spawn_my_brutus()<br />{<br />    brutus_spawners =  struct::get_array(&quot;brutus_arena_spawn&quot;,&quot;targetname&quot;);<br />    for(i=0;i&lt;level.brutuses;i++)<br />    {<br />        rand = RandomIntRange( 0, brutus_spawners.size );<br />        brutus_spawners[rand] thread brutus::arena_spawn_brutus();<br />        wait(level.brutus_in_between_spawn_time);<br />    }<br />}<br />function brutus_reward()<br />{<br />    //IPrintLnBold(&quot;brutus_reward&quot;);<br />    if(level.brutus_reward == &quot;door&quot; || level.brutus_reward_2 == &quot;door&quot; || level.brutus_reward_3 == &quot;door&quot;)<br />    {<br />        //IPrintLnBold(&quot;door reward&quot;);<br />        time = 2; //2 is amount of time in seconds door takes to move.<br />        door_parts = GetEntArray(&quot;brutus_door&quot;,&quot;targetname&quot;);<br />        for(i=0;i&lt;door_parts.size;i++)<br />        {<br />            target = Struct::Get(door_parts<em>.target,&quot;targetname&quot;);<br />            if(isdefined(target))<br />                door_parts<em>MoveTo(target.origin, time);<br />            if(isdefined(door_parts<em>.script_vector))<br />                door_parts<em>MoveTo(door_parts<em>.origin + (door_parts<em>.script_vector), time);<br />        }<br />        wait(time);<br />        <br />        if(level.brutus_delete_door_after_move == true)<br />        {<br />            for(i=0;i&lt;door_parts.size;i++)<br />            {<br />                <br />                door_parts<em>Delete();<br />            }<br />        }<br />    }<br />    if(level.brutus_reward == &quot;powerup&quot; || level.brutus_reward_2 == &quot;powerup&quot; || level.brutus_reward_3 == &quot;powerup&quot;)<br />    {<br />        powerup_struct = GetEnt(&quot;brutus_powerup_struct&quot;,&quot;targetname&quot;);<br />        if(level.brutus_powerup_type != &quot;random&quot;)<br />            thread zm_powerups::specific_powerup_drop( level.brutus_powerup_type, powerup_struct.origin);<br />        if(level.brutus_powerup_type == &quot;random&quot;)<br />        {<br />            rand = RandomIntRange( 0, 7 ); //(&quot;full_ammo&quot;,&quot;nuke&quot;,&quot;insta_kill&quot;,&quot;free_perk&quot;,&quot;fire_sale&quot;,&quot;double_points&quot;,&quot;carpenter&quot;,&quot;minigun&quot;)<br />            if(rand == 0)<br />                thread zm_powerups::specific_powerup_drop( &quot;full_ammo&quot;, powerup_struct.origin);<br />            if(rand == 1)<br />                thread zm_powerups::specific_powerup_drop( &quot;nuke&quot;, powerup_struct.origin);<br />            if(rand == 2)<br />                thread zm_powerups::specific_powerup_drop( &quot;insta_kill&quot;, powerup_struct.origin);<br />            if(rand == 3)<br />                thread zm_powerups::specific_powerup_drop( &quot;free_perk&quot;, powerup_struct.origin);<br />            if(rand == 4)<br />                thread zm_powerups::specific_powerup_drop( &quot;fire_sale&quot;, powerup_struct.origin);<br />            if(rand == 5)<br />                thread zm_powerups::specific_powerup_drop( &quot;double_points&quot;, powerup_struct.origin);<br />            if(rand == 6)<br />                thread zm_powerups::specific_powerup_drop( &quot;carpenter&quot;, powerup_struct.origin);<br />            if(rand == 7)<br />                thread zm_powerups::specific_powerup_drop( &quot;minigun&quot;, powerup_struct.origin);<br />        }<br />    }<br />    if(level.brutus_reward == &quot;gun&quot; || level.brutus_reward_2 == &quot;gun&quot; || level.brutus_reward_3 == &quot;gun&quot;)<br />    {<br />        //IPrintLnBold(&quot;gun reward&quot;);<br />        if(level.brutus_one_gun_per_player == false)<br />            gun_struct = struct::get(&quot;brutus_gun_struct&quot;,&quot;targetname&quot;);<br />            thread brutus_RewardGun(gun_struct.origin+(0,0,40), array::randomize(level.brutus_reward_weapons)[0]);<br />        if(level.brutus_one_gun_per_player == true &amp;&amp; level.brutus_different_guns_per_player == true)<br />        {<br />            gun_structs = struct::get_array(&quot;brutus_gun_struct&quot;,&quot;targetname&quot;);<br />            players = GetPlayers();<br />            for(i=0;i&lt;players.size;i++)<br />            {<br />                thread brutus_RewardGun(gun_structs<em>.origin+(0,0,40), array::randomize(level.brutus_reward_weapons)[0]);<br />            }<br />        }<br />        if(level.brutus_one_gun_per_player == true &amp;&amp; level.brutus_different_guns_per_player == false)<br />        {<br />            rand = RandomIntRange( 0, level.brutus_reward_weapons.size );<br />            gun_structs = struct::get_array(&quot;brutus_gun_struct&quot;,&quot;targetname&quot;);<br />            players = GetPlayers();<br />            for(i=0;i&lt;players.size;i++)<br />            {<br />                thread brutus_RewardGun(gun_structs<em>.origin+(0,0,40), level.brutus_reward_weapons[rand]);<br />            }<br />        }<br />    }<br />}<br />function brutus_RewardGun(pos, weapon)<br />{<br />    gun = spawn(&quot;script_model&quot;, pos);<br />    playsoundatposition(&quot;zmb_spawn_powerup&quot;, pos);<br />    <br />    gun SetModel(GetWeaponWorldModel(GetWeapon(weapon)));<br />    PlayFX(level._effect[&quot;powerup_grabbed_solo&quot;], gun.origin);<br />    trig = spawn(&quot;trigger_radius&quot;, gun.origin, 0, 20, 50);<br />    gun thread brutus_SpinMe();<br />    gun thread brutus_GiveMe(weapon, trig);<br />    if(level.brutus_gun_expire == true)<br />        gun thread brutus_LifeTime(trig);<br />}<br />function brutus_LifeTime(trig)<br />{<br />    self endon(&quot;death&quot;);<br />    wait(120);//wait 2 minutes then delete<br />    if(isdefined(self))<br />    {<br />        self notify(&quot;rewardgun_delete&quot;);<br />    }<br />    if(isdefined(trig))<br />    {<br />        trig delete();<br />    }<br />    if(isdefined(self))<br />    {<br />        self delete();<br />    }<br />}<br />function brutus_GiveMe(weapon, trig)<br />{<br />    self endon(&quot;rewardgun_delete&quot;);<br />    while(1)<br />    {<br />        trig waittill(&quot;trigger&quot;, player);<br />        player thread brutus_SetGunHint(level.brutus_gun_hintstring, trig);<br />        if(player HasWeapon(getweapon(&quot;minigun&quot;)))<br />        {<br />            continue;<br />        }<br />        if(!(player UseButtonPressed()))<br />        {<br />            continue;<br />        }<br />        if(player laststand::player_is_in_laststand())<br />        {<br />            continue;<br />        }<br />        trig delete();<br />        self delete();<br />        player zm_weapons::weapon_give(getweapon(weapon));<br />        player SwitchToWeapon(getweapon(weapon));<br />        break;<br />        wait(.1);<br />    }<br />}<br /><br />function brutus_SpinMe()<br />{<br />    self endon(&quot;rewardgun_delete&quot;);<br />    self endon(&quot;death&quot;);<br />    while(isdefined(self))<br />    {<br />        if(isdefined(self))<br />        {<br />            self rotateyaw(360,2);<br />        }<br />        wait(1.9);<br />    }<br />}<br />function brutus_SetGunHint(text, trig)<br />{<br />    if(isdefined(self.brutus_gun_hud))<br />    {<br />        return;<br />    }<br />    self.brutus_gun_hud = NewClientHudElem( self );<br />    self.brutus_gun_hud.horzAlign = &quot;center&quot;;<br />    self.brutus_gun_hud.vertAlign = &quot;middle&quot;;<br />    self.brutus_gun_hud.alignX = &quot;center&quot;;<br />    self.brutus_gun_hud.alignY = &quot;middle&quot;;<br />    self.brutus_gun_hud.foreground = 1;<br />    self.brutus_gun_hud.fontscale = 1;<br />    self.brutus_gun_hud.alpha = 1;<br />    self.brutus_gun_hud.color = ( 0.44, .74, .94 );<br />    self.brutus_gun_hud SetText(text);<br />    while(isdefined(trig) &amp;&amp; self IsTouching(trig))<br />    {<br />        wait(.05);<br />    }<br />    self.brutus_gun_hud SetText(&quot;&quot;);<br />    self.brutus_gun_hud Destroy();<br />    self.brutus_gun_hud = undefined;<br />}<br /><br /><br />//Teleport player<br />function player_teleporter_init()<br />{<br />    player_tp = GetEntArray( &quot;teleport_player&quot;, &quot;targetname&quot; );<br />    for( i = 0; i &lt; player_tp.size; i++ )<br />    {<br />        player_tp<em>thread player_teleport();<br />    }<br />}<br /><br />function player_teleport()<br />{<br />    destination = GetEnt( self.target, &quot;targetname&quot; );<br />    while(1)<br />    {<br />        self waittill( &quot;trigger&quot;, player );<br />        player SetOrigin( destination.origin );<br />        player SetPlayerAngles( destination.angles );<br />    }<br />}[/CODE]<br />[/SPOILER]</em></em></em></em></em></em></em></em></em></em>
</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">eDeK</span></span>:</strong>

<p><blockquote>Hi [USER=291]@KillJoy[/USER]<br /><br />I try the script but doesn&#39;t happen anything :(<br />When I touch the trigger it&#39;s like it wasn&#39;t there at all, any idea what I can do to solve it?<br /><br /><img style="max-width: 500px;" src="{{ '/wiki/threads/assets/a.569.jpg' | relative_url }}"><br /><br /><img style="max-width: 500px;" src="{{ '/wiki/threads/assets/a.570.jpg' | relative_url }}"><br /><br />
[CODE=php]#using scripts\codescripts\struct;<br /><br />#using scripts\shared\array_shared;<br />#using scripts\shared\callbacks_shared;<br />#using scripts\shared\clientfield_shared;<br />#using scripts\shared\compass;<br />#using scripts\shared\exploder_shared;<br />#using scripts\shared\flag_shared;<br />#using scripts\shared\laststand_shared;<br />#using scripts\shared\math_shared;<br />#using scripts\shared\scene_shared;<br />#using scripts\shared\util_shared;<br /><br />#insert scripts\shared\shared.gsh;<br />#insert scripts\shared\version.gsh;<br /><br />#insert scripts\zm\_zm_utility.gsh;<br /><br />#using scripts\zm\_load;<br />#using scripts\zm\_zm;<br />#using scripts\zm\_zm_audio;<br />#using scripts\zm\_zm_powerups;<br />#using scripts\zm\_zm_utility;<br />#using scripts\zm\_zm_weapons;<br />#using scripts\zm\_zm_zonemgr;<br /><br />#using scripts\shared\ai\zombie_utility;<br /><br />//Perks<br />#using scripts\zm\_zm_pack_a_punch;<br />#using scripts\zm\_zm_pack_a_punch_util;<br />#using scripts\zm\_zm_perk_additionalprimaryweapon;<br />#using scripts\zm\_zm_perk_doubletap2;<br />#using scripts\zm\_zm_perk_deadshot;<br />#using scripts\zm\_zm_perk_juggernaut;<br />#using scripts\zm\_zm_perk_quick_revive;<br />#using scripts\zm\_zm_perk_sleight_of_hand;<br />#using scripts\zm\_zm_perk_staminup;<br /><br />//Powerups<br />#using scripts\zm\_zm_powerup_double_points;<br />#using scripts\zm\_zm_powerup_carpenter;<br />#using scripts\zm\_zm_powerup_fire_sale;<br />#using scripts\zm\_zm_powerup_free_perk;<br />#using scripts\zm\_zm_powerup_full_ammo;<br />#using scripts\zm\_zm_powerup_insta_kill;<br />#using scripts\zm\_zm_powerup_nuke;<br />//#using scripts\zm\_zm_powerup_weapon_minigun;<br /><br />//Traps<br />#using scripts\zm\_zm_trap_electric;<br /><br />#using scripts\zm\zm_usermap;<br /><br />    // NSZ Brutus<br />    #using scripts\_NSZ\nsz_brutus;<br /><br />//*****************************************************************************<br />// MAIN<br />//*****************************************************************************<br /><br />function main()<br />{<br />    // NSZ Brutus<br />    brutus::init();<br /><br />    zm_usermap::main();<br /><br />    //Teleport player<br />    thread player_teleporter_init();<br />   <br />    level._zombie_custom_add_weapons =&amp;custom_add_weapons;<br />   <br />    //Setup the levels Zombie Zone Volumes<br />    level.zones = [];<br />    level.zone_manager_init_func =&amp;usermap_test_zone_init;<br />    init_zones[0] = &quot;start_zone&quot;;<br />    level thread zm_zonemgr::manage_zones( init_zones );<br /><br />    level.pathdist_type = PATHDIST_ORIGINAL;<br /><br />    //Brutus Boss fight<br />    thread brutus_doo_dah();<br />}<br /><br />function usermap_test_zone_init()<br />{<br />    level flag::init( &quot;always_on&quot; );<br />    level flag::set( &quot;always_on&quot; );<br />}  <br /><br />function custom_add_weapons()<br />{<br />    zm_weapons::load_weapon_spec_from_table(&quot;gamedata/weapons/zm/zm_levelcommon_weapons.csv&quot;, 1);<br />}<br /><br />//Brutus Boss Fight<br />function brutus_doo_dah()<br />{<br />    level.brutuses = 14; //amount of brutuses to spawn<br />    level.brutus_in_between_spawn_time = 30; //time between spawns for Brutus. If you&#39;re only spawning one Brutus, set this to 0.<br />    level.stop_zombies_from_spawning = false; //set &quot;true&quot; to stop zombies from spawning during Brutus fight.<br />    level.kill_all_zombies_before_fight = true; //set &quot;true&quot; to kill all zombies before Brutus fight.<br /><br />    level.brutus_reward = &quot;door&quot;; //what happens when you kill all the Brutuses. Right now, options are: (&quot;door&quot;,&quot;powerup&quot;,&quot;gun&quot;)<br />    level.brutus_reward_2 = false; //add another reward if you want. just say &quot;false&quot; or delete the line if you don&#39;t want an extra reward.<br />    level.brutus_reward_3 = false; //add yet another reward if you want. Note that you cannot do more than one of the same reward.<br />    level.brutus_powerup_type = &quot;nuke&quot;; //if using a powerup as one of your rewards, this is what type. can be (&quot;full_ammo&quot;,&quot;nuke&quot;,&quot;insta_kill&quot;,&quot;free_perk&quot;,&quot;fire_sale&quot;,&quot;double_points&quot;,&quot;carpenter&quot;,&quot;minigun&quot;,and &quot;random&quot;)<br />    level.brutus_reward_weapons = array( &quot;ar_damage&quot;, &quot;lmg_cqb&quot;, &quot;shotgun_pump&quot;, &quot;smg_versatile&quot; ); //weapons it can give you in the &quot;gun&quot; reward. put as many or as little as you like.<br />    level.brutus_gun_expire = true; //whether or not the gun will go away in time.<br />    level.brutus_delete_door_after_move = true; //set &quot;true&quot; to delete the door after its done moving. Would recommend if it won&#39;t be seen.<br />    level.brutus_gun_hintstring = &quot;Press ^3[{+activate}]^7 to take weapon&quot;; //if gun reward is activated, hintstring for picking up gun.<br />    level.brutus_one_gun_per_player = true; //for gun powerup, set &quot;true&quot; if you want a gun to spawn for each player, &quot;false&quot; for just one gun no matter what.<br />    level.brutus_different_guns_per_player = false; //for gun powerup, set &quot;true&quot; if you want each gun to be randomly different, false if you want them to be the same random gun. if one_gun_per_player = &quot;false&quot; this doesn&#39;t matter.<br />   <br />   <br />    trig = GetEnt(&quot;brutus_trig&quot;,&quot;targetname&quot;);<br />    trig waittill(&quot;trigger&quot;,player);<br />    if(level.stop_zombies_from_spawning == true)<br />        level flag::clear( &quot;spawn_zombies&quot; );<br />    if(level.kill_all_zombies_before_fight == true)<br />    {<br />        zombies = zombie_utility::get_round_enemy_array();<br />        if ( isdefined( zombies ) )<br />        {<br />            array::run_all( zombies, &amp;Kill );<br />        }<br />    }<br />   <br />   <br />    thread spawn_my_brutus();  <br />   <br />   <br />   <br />    level waittill(&quot;all_brutuses_down&quot;);<br />    //IPrintLnBold(&quot;recieved&quot;);<br />    if(level.stop_zombies_from_spawning == true)<br />        level flag::set( &quot;spawn_zombies&quot; );<br />    brutus_reward();<br />}<br />function spawn_my_brutus()<br />{<br />    brutus_spawners =  struct::get_array(&quot;brutus_arena_spawn&quot;,&quot;targetname&quot;);<br />    for(i=0;i&lt;level.brutuses;i++)<br />    {<br />        rand = RandomIntRange( 0, brutus_spawners.size );<br />        brutus_spawners[rand] thread brutus::arena_spawn_brutus();<br />        wait(level.brutus_in_between_spawn_time);<br />    }<br />}<br />function brutus_reward()<br />{<br />    //IPrintLnBold(&quot;brutus_reward&quot;);<br />    if(level.brutus_reward == &quot;door&quot; || level.brutus_reward_2 == &quot;door&quot; || level.brutus_reward_3 == &quot;door&quot;)<br />    {<br />        //IPrintLnBold(&quot;door reward&quot;);<br />        time = 2; //2 is amount of time in seconds door takes to move.<br />        door_parts = GetEntArray(&quot;brutus_door&quot;,&quot;targetname&quot;);<br />        for(i=0;i&lt;door_parts.size;i++)<br />        {<br />            target = Struct::Get(door_parts<em>.target,&quot;targetname&quot;);<br />            if(isdefined(target))<br />                door_parts<em>MoveTo(target.origin, time);<br />            if(isdefined(door_parts<em>.script_vector))<br />                door_parts<em>MoveTo(door_parts<em>.origin + (door_parts<em>.script_vector), time);<br />        }<br />        wait(time);<br />       <br />        if(level.brutus_delete_door_after_move == true)<br />        {<br />            for(i=0;i&lt;door_parts.size;i++)<br />            {<br />               <br />                door_parts<em>Delete();<br />            }<br />        }<br />    }<br />    if(level.brutus_reward == &quot;powerup&quot; || level.brutus_reward_2 == &quot;powerup&quot; || level.brutus_reward_3 == &quot;powerup&quot;)<br />    {<br />        powerup_struct = GetEnt(&quot;brutus_powerup_struct&quot;,&quot;targetname&quot;);<br />        if(level.brutus_powerup_type != &quot;random&quot;)<br />            thread zm_powerups::specific_powerup_drop( level.brutus_powerup_type, powerup_struct.origin);<br />        if(level.brutus_powerup_type == &quot;random&quot;)<br />        {<br />            rand = RandomIntRange( 0, 7 ); //(&quot;full_ammo&quot;,&quot;nuke&quot;,&quot;insta_kill&quot;,&quot;free_perk&quot;,&quot;fire_sale&quot;,&quot;double_points&quot;,&quot;carpenter&quot;,&quot;minigun&quot;)<br />            if(rand == 0)<br />                thread zm_powerups::specific_powerup_drop( &quot;full_ammo&quot;, powerup_struct.origin);<br />            if(rand == 1)<br />                thread zm_powerups::specific_powerup_drop( &quot;nuke&quot;, powerup_struct.origin);<br />            if(rand == 2)<br />                thread zm_powerups::specific_powerup_drop( &quot;insta_kill&quot;, powerup_struct.origin);<br />            if(rand == 3)<br />                thread zm_powerups::specific_powerup_drop( &quot;free_perk&quot;, powerup_struct.origin);<br />            if(rand == 4)<br />                thread zm_powerups::specific_powerup_drop( &quot;fire_sale&quot;, powerup_struct.origin);<br />            if(rand == 5)<br />                thread zm_powerups::specific_powerup_drop( &quot;double_points&quot;, powerup_struct.origin);<br />            if(rand == 6)<br />                thread zm_powerups::specific_powerup_drop( &quot;carpenter&quot;, powerup_struct.origin);<br />            if(rand == 7)<br />                thread zm_powerups::specific_powerup_drop( &quot;minigun&quot;, powerup_struct.origin);<br />        }<br />    }<br />    if(level.brutus_reward == &quot;gun&quot; || level.brutus_reward_2 == &quot;gun&quot; || level.brutus_reward_3 == &quot;gun&quot;)<br />    {<br />        //IPrintLnBold(&quot;gun reward&quot;);<br />        if(level.brutus_one_gun_per_player == false)<br />            gun_struct = struct::get(&quot;brutus_gun_struct&quot;,&quot;targetname&quot;);<br />            thread brutus_RewardGun(gun_struct.origin+(0,0,40), array::randomize(level.brutus_reward_weapons)[0]);<br />        if(level.brutus_one_gun_per_player == true &amp;&amp; level.brutus_different_guns_per_player == true)<br />        {<br />            gun_structs = struct::get_array(&quot;brutus_gun_struct&quot;,&quot;targetname&quot;);<br />            players = GetPlayers();<br />            for(i=0;i&lt;players.size;i++)<br />            {<br />                thread brutus_RewardGun(gun_structs<em>.origin+(0,0,40), array::randomize(level.brutus_reward_weapons)[0]);<br />            }<br />        }<br />        if(level.brutus_one_gun_per_player == true &amp;&amp; level.brutus_different_guns_per_player == false)<br />        {<br />            rand = RandomIntRange( 0, level.brutus_reward_weapons.size );<br />            gun_structs = struct::get_array(&quot;brutus_gun_struct&quot;,&quot;targetname&quot;);<br />            players = GetPlayers();<br />            for(i=0;i&lt;players.size;i++)<br />            {<br />                thread brutus_RewardGun(gun_structs<em>.origin+(0,0,40), level.brutus_reward_weapons[rand]);<br />            }<br />        }<br />    }<br />}<br />function brutus_RewardGun(pos, weapon)<br />{<br />    gun = spawn(&quot;script_model&quot;, pos);<br />    playsoundatposition(&quot;zmb_spawn_powerup&quot;, pos);<br />   <br />    gun SetModel(GetWeaponWorldModel(GetWeapon(weapon)));<br />    PlayFX(level._effect[&quot;powerup_grabbed_solo&quot;], gun.origin);<br />    trig = spawn(&quot;trigger_radius&quot;, gun.origin, 0, 20, 50);<br />    gun thread brutus_SpinMe();<br />    gun thread brutus_GiveMe(weapon, trig);<br />    if(level.brutus_gun_expire == true)<br />        gun thread brutus_LifeTime(trig);<br />}<br />function brutus_LifeTime(trig)<br />{<br />    self endon(&quot;death&quot;);<br />    wait(120);//wait 2 minutes then delete<br />    if(isdefined(self))<br />    {<br />        self notify(&quot;rewardgun_delete&quot;);<br />    }<br />    if(isdefined(trig))<br />    {<br />        trig delete();<br />    }<br />    if(isdefined(self))<br />    {<br />        self delete();<br />    }<br />}<br />function brutus_GiveMe(weapon, trig)<br />{<br />    self endon(&quot;rewardgun_delete&quot;);<br />    while(1)<br />    {<br />        trig waittill(&quot;trigger&quot;, player);<br />        player thread brutus_SetGunHint(level.brutus_gun_hintstring, trig);<br />        if(player HasWeapon(getweapon(&quot;minigun&quot;)))<br />        {<br />            continue;<br />        }<br />        if(!(player UseButtonPressed()))<br />        {<br />            continue;<br />        }<br />        if(player laststand::player_is_in_laststand())<br />        {<br />            continue;<br />        }<br />        trig delete();<br />        self delete();<br />        player zm_weapons::weapon_give(getweapon(weapon));<br />        player SwitchToWeapon(getweapon(weapon));<br />        break;<br />        wait(.1);<br />    }<br />}<br /><br />function brutus_SpinMe()<br />{<br />    self endon(&quot;rewardgun_delete&quot;);<br />    self endon(&quot;death&quot;);<br />    while(isdefined(self))<br />    {<br />        if(isdefined(self))<br />        {<br />            self rotateyaw(360,2);<br />        }<br />        wait(1.9);<br />    }<br />}<br />function brutus_SetGunHint(text, trig)<br />{<br />    if(isdefined(self.brutus_gun_hud))<br />    {<br />        return;<br />    }<br />    self.brutus_gun_hud = NewClientHudElem( self );<br />    self.brutus_gun_hud.horzAlign = &quot;center&quot;;<br />    self.brutus_gun_hud.vertAlign = &quot;middle&quot;;<br />    self.brutus_gun_hud.alignX = &quot;center&quot;;<br />    self.brutus_gun_hud.alignY = &quot;middle&quot;;<br />    self.brutus_gun_hud.foreground = 1;<br />    self.brutus_gun_hud.fontscale = 1;<br />    self.brutus_gun_hud.alpha = 1;<br />    self.brutus_gun_hud.color = ( 0.44, .74, .94 );<br />    self.brutus_gun_hud SetText(text);<br />    while(isdefined(trig) &amp;&amp; self IsTouching(trig))<br />    {<br />        wait(.05);<br />    }<br />    self.brutus_gun_hud SetText(&quot;&quot;);<br />    self.brutus_gun_hud Destroy();<br />    self.brutus_gun_hud = undefined;<br />}<br /><br /><br />//Teleport player<br />function player_teleporter_init()<br />{<br />    player_tp = GetEntArray( &quot;teleport_player&quot;, &quot;targetname&quot; );<br />    for( i = 0; i &lt; player_tp.size; i++ )<br />    {<br />        player_tp<em>thread player_teleport();<br />    }<br />}<br /><br />function player_teleport()<br />{<br />    destination = GetEnt( self.target, &quot;targetname&quot; );<br />    while(1)<br />    {<br />        self waittill( &quot;trigger&quot;, player );<br />        player SetOrigin( destination.origin );<br />        player SetPlayerAngles( destination.angles );<br />    }<br />}[/CODE]<br />[/SPOILER]<br />[/QUOTE]<br />Use a Script/Struct/Origin, and select ServerSide.</em></em></em></em></em></em></em></em></em></em>
</blockquote></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Harry Bo21</span></span>:</strong>

<p>Heâ€™s using getEnt but telling you to place a struct...<br /><br />change the struct to a script origin</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Pepergogo</span></span>:</strong>

<p>Yeah I was using a struct and change to origin, set to ServerSide and now it&#39;s working just fine<br /><br />Thanks [USER=615]@eDeK[/USER]  and [USER=147]@Harry Bo21[/USER]  :D</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">KillJoy</span></span>:</strong>

<p>ah my bad &#128556;</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Pepergogo</span></span>:</strong>

<p><blockquote>ah my bad &#128556;<br /></blockquote><br />Np<br />One question, do you know if I can use multiple script_origin so when multiple players touch the trigger they appear in them insted in just 1 location?</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">mrlednor</span></span>:</strong>

<p><blockquote>Np<br />One question, do you know if I can use multiple script_origin so when multiple players touch the trigger they appear in them insted in just 1 location?<br /></blockquote><br />hay did u get this to work with multiple script origin ? thanks</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Pepergogo</span></span>:</strong>

<p><blockquote>hay did u get this to work with multiple script origin ? thanks<br /></blockquote><br />I found the solution by [USER=75]@IceGrenade[/USER] in a Discord server<br /><br />Haven&#39;t test it yet but I took a screenshot if you want to try it</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">mrlednor</span></span>:</strong>

<p><blockquote>I found the solution by [USER=75]@IceGrenade[/USER] in a Discord server<br /><br />Haven&#39;t test it yet but I took a screenshot if you want to try it<br /></blockquote><br />thanks</p>
